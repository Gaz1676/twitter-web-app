<!--
* Author: Gary Fleming
* Student No: 20019497
* Date: Jan 7th 2018
-->

<section class="ui inverted teal segment">
    <section class="ui yellow raised segment">
        <div class="ui grid">

            <aside class="six wide column">
                <div class="ui card">
                    {{#if user.picture.data}}
                        <div class="image">
                            &nbsp;
                            <h3 class="ui center aligned header">{{user.firstName}} {{user.lastName}}'s Profile</h3>
                            <img src="/getuserpicture/{{id}}"/>
                        </div>
                    {{else}}
                        <img class="ui medium centered image" src="/images/noimage.jpg"/>
                    {{/if}}

                    <div class="extra content">
                        <i class="blue mail icon"></i>&nbsp;{{user.email}}<br>
                        <i class="blue twitter icon"></i>{{userStats.posts}} post(s)<br>
                        <i class="blue users icon"></i>{{user.followers.length}} follower(s)<br>
                        <i class="blue users icon"></i>{{user.following.length}} following<br><br>

                        <div class="content">
                            <tr>
                                <td>
                                    <div class="column">
                                        {{#if isFollowed}}  <!--if user is followed-->
                                            <a href="/unfollow/{{id}}">
                                                <button class="ui red mini basic button" title="Click to unfollow">
                                                    <i class="red twitter icon"></i>UnFollow
                                                </button>
                                            </a>

                                        {{else}} <!--if user is unfollowed-->
                                            <a href="/follow/{{id}}">
                                                <button class="ui blue mini basic button" title="Click to follow">
                                                    <i class="blue twitter icon"></i>Follow
                                                </button>
                                            </a>
                                        {{/if}}
                                    </div>
                                </td>
                            </tr>
                        </div>
                    </div>
                </div>
            </aside>

            {{#if tweets}}
                <article class="ten wide column">
                    <table class="ui striped table raised segment">
                        <thead>
                        <tr>
                            <th>
                                <h3 class="ui center aligned header">All of {{user.firstName}}'s Tweets</h3>
                            </th>
                        </tr>
                        </thead>

                        <tbody class="ui segment">
                        {{#each tweets}}
                            <tr>
                                <td>
                                    <!-- https://semantic-ui.com/views/comment.html -->
                                    <div class="ui comments">
                                        <div class="comment">
                                            {{#if tweeter.picture.data}}
                                                <div class="ui massive avatar image">
                                                    <img class="ui image" src="/getuserpicture/{{tweeter.id}}">
                                                </div>
                                            {{else}}
                                                <div class="avatar">
                                                    <img class="ui rounded image" src="/images/noimage.jpg">
                                                </div>
                                            {{/if}}

                                            <div class="content">
                                                <div class="text">
                                                    <pre>     {{text}}</pre>
                                                </div>

                                                <!-- Tweet image // https://jsfiddle.net/mikael_roos/7bMmE/ -->
                                                <div class="over">
                                                    {{#if picture.data}}
                                                        <div class="image">
                                                            <img class='lightbox' src="/getpicture/{{id}}" title="Click to View Full Screen"/>
                                                        </div>
                                                    {{/if}}
                                                </div>
                                                <br>

                                                <div class="metadata">
                                                    &emsp;Tweeted by: {{tweeter.firstName}} {{tweeter.lastName}}
                                                    <br>
                                                    <div class="date">&emsp;<i class="at icon"></i>{{date}}</div>&emsp;
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        {{/each}}
                        </tbody>

                    </table>
                </article>
            {{else}}
                <aside class="ten wide column">
                    <section class="ui center aligned raised segment">
                        <h2 class="ui red header">No Tweets??? This User is very lazy or very dead!!</h2>
                        <img src="../images/zombie_twitter.png" class="ui medium centered image">
                    </section>
                </aside>
            {{/if}}
        </div>
    </section>
</section>

<script src="../js/image-pulse.js"></script>
<script src="../js/image-popup.js"></script>